
@using CustomerPortal.Utility
@model CustomerPortal.ViewModel.BillPay.BillCreateViewModel
@{
   ViewData["Title"] = "Create Bill";
}

<div class="text-center justify-content-center align-items-center d-flex flex-column">
   <h3 class="mb-3 text-center">Create Bill</h3>
   <h6 class="text-center text-muted mb-2">Create and schedule a new Bill</h6>
   
   <div class="justify-content-center mb-5">
      <div class="p-4 justify-content-center" style="width: 400px;">
         <div asp-validation-summary="All" class="text-danger"></div>

         @* @if (!string.IsNullOrEmpty(Model.Message)) *@
         @* { *@
         @*    <div class="alert @(Model.IsSuccess ? "alert-success" : "alert-danger") text-center"> *@
         @*       @Model.Message *@
         @*    </div> *@
         @* } *@
        
         <form asp-action="Create" method="post">
            <div asp-validation-summary="All" class="text-danger"></div>

            <div class="mb-3">
               <label class="form-label">Select Account</label>
               <select asp-for="AccountNumber" class="form-control" asp-items="Model.Accounts">
                  <option value="" selected disabled>Select account</option>
               </select>
               <span asp-validation-for="AccountNumber" class="text-danger"></span>
            </div>

            <div class="mb-3">
               <label class="form-label">Select Payee</label>
               <select asp-for="PayeeID" class="form-select" required>
                  <option value="" disabled selected>Select payee</option>
                  @if (Model.Payees != null && Model.Payees.Any())
                  {
                     @foreach (var payee in Model.Payees)
                     {
                        <option value="@payee.Value">@payee.Text</option>
                     }
                  }
                  else
                  {
                     <option disabled>No payees available</option>
                  }
               </select>
               <span asp-validation-for="PayeeID" class="text-danger"></span>
            </div>

            <div class="mb-3">
               <label class="form-label">Amount</label>
               <input asp-for="Amount" type="number" value="" class="form-control" />
               <span asp-validation-for="Amount" class="text-danger"></span>
            </div>

            <div class="mb-3">
               <label class="form-label">Schedule Time</label>
               <input asp-for="ScheduleTimeUtc" type="datetime-local" class="form-control" value="@Model.ScheduleTimeUtc.ToString("yyyy-MM-ddTHH:mm")" />
               <span asp-validation-for="ScheduleTimeUtc" class="text-danger"></span>
            </div>

            <div class="mb-3">
               <label class="form-label">Select Bill Period</label>
               <select asp-for="BillPeriod" class="form-control" required>
                  <option value="" selected disabled>Select period</option>
                  @foreach (var period in Enum.GetValues(typeof(BillPeriod)).Cast<BillPeriod>())
                  {
                     <option value="@period">@period</option>
                  }
               </select>
               
            </div>

            <button type="submit" class="btn btn-primary">Schedule Payment</button>
            <a asp-action="Index" class="btn btn-secondary">Cancel</a>
         </form>
         
      </div>
   </div>
</div>
    

    

    